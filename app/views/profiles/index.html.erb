<p id="notice"><%= notice %></p>

 <h1>Profiles</h1>

 <table>
   <thead>
     <tr>
       <th>Icon</th>
       <th>Gender</th>
       <th>Birthday</th>
       <th>Home country</th>
       <th>Home city</th>
       <th>First language</th>
       <th>Second language</th>
       <th>Introduction</th>
       <th colspan="3"></th>
     </tr>
   </thead>

   <tbody>
     <% @profiles.each do |profile| %>
       <tr>
         <td><%= profile.icon %></td>
         <td><%= profile.gender %></td>
         <td><%= profile.birthday %></td>
         <td><%= profile.home_country %></td>
         <td><%= profile.home_city %></td>
         <td><%= profile.first_language %></td>
         <td><%= profile.second_language %></td>
         <td><%= profile.introduction %></td>
         <td><%= link_to 'Show', profile %></td>
         <td><%= link_to 'Edit', edit_profile_path(profile) %></td>
         <td><%= link_to 'Destroy', profile, method: :delete, data: { confirm: 'Are you sure?' } %></td>
       </tr>
     <% end %>
   </tbody>
 </table>

<p>・登録ユーザーの国別数</p>
 <%= Profile.group(:home_country).count %>

<p>地図</p>
 <%= geo_chart Profile.group(:home_country).count %>

<p>地図データ確認code</p>
 <%= Place.group(:code).count.size %>ヶ国中
 <%= Place.group(:code).count %>
 <%= geo_chart Place.group(:code).count %>

<p>地図データ確認name</p>
 <%= Place.group(:name_en).count.size %>
 <%= Place.group(:name_en).count %>
 <%= geo_chart Place.group(:name_en).count %>

<p>サンプル</p>
 <%= geo_chart [['Popularity'], ['Germany', 200], ['United States', 300], ['Brazil', 400], ['Canada', 500], ['France', 600], ['RU', 700]], colors: ["#33C1FF", "#008ED6"] %> 

<p>Google Map</p>

  <p>From -- <%= @from.name_jp %>の緯度: <%= @from.latitude %> 経度:<%= @from.longitude %>
  <i class="flag-icon flag-icon-<%= @from.code.downcase %>"></i></p>
  <p>To -- <%= @to.name_jp %>の緯度: <%= @to.latitude %> 経度:<%= @to.longitude %>
  <i class="flag-icon flag-icon-<%= @to.code.downcase %>"></i></p>

  <p>距離 <%= @to.distance_to(@from) %></p>
  <p>中間地点 <%= @middle %></p>
  
  <div id="map"></div>

  <script>
    function initMap() {
      var from = { lat: <%= @from.latitude %>, lng: <%= @from.longitude %> };
      var to = { lat: <%= @to.latitude %>, lng: <%= @to.longitude %> };
      var middle = { lat: <%= @middle[0] %>, lng: <%= @middle[1] %> };
      var map = new google.maps.Map(document.getElementById("map"), {
        center: middle,
        zoom: 2,
      });

       //positionに指定した座標にピンを表示
      var name1 = 'From：<%= @from.name_jp %>';
      var name2 = 'To：<%= @to.name_jp %>';
      var marker1 = new google.maps.Marker({
                    position: from,
                    map: map,
                    title: name1
      });
      var marker2 = new google.maps.Marker({
                    position: to,
                    map: map,
                    title: name2
      });

      var contentString = 'おいしいものいっぱい';
      var infowindow1 = new google.maps.InfoWindow({
          content: `<h1>${name1}</h1>` + contentString
      });

       marker1.addListener("click", () => {
        infowindow1.open({
          anchor: marker1,
          map,
          shouldFocus: false,
        });
      });

      var infowindow2 = new google.maps.InfoWindow({
          content: `<h1>${name2}</h1>` + contentString
      });

       marker2.addListener("click", () => {
        infowindow2.open({
          anchor: marker2,
          map,
          shouldFocus: false,
        });
      });

       infoWindow.addListener('closeclick', ()=>{
        // Handle focus manually.
      });
    } 
  </script>

        <i class="flag-icon flag-icon-jp"></i>
        <i class="flag-icon flag-icon-us"></i>
        <i class="flag-icon flag-icon-cc"></i>
        <i class="flag-icon flag-icon-ai"></i>

        <hr />
        <i class="flag-icon flag-icon-jp flag-icon-squared"></i>
        <i class="flag-icon flag-icon-us flag-icon-squared"></i>


 <%= link_to 'New Profile', new_profile_path %>


 <hr>
 <p>国旗一覧</p>
 <% @places.each do |place| %>
  <p>
    <%= place.id %><%= place.name_jp %>
    <i class="flag-icon flag-icon-<%= place.code.downcase %>"></i>
  </p>
 <% end %>

